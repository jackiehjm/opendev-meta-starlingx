From cc45b5ce1a57a0ecfa5bcb6131943a7fc0f6f5a6 Mon Sep 17 00:00:00 2001
From: Jackie Huang <jackie.huang@windriver.com>
Date: Thu, 20 May 2021 15:01:33 +0800
Subject: [PATCH 4/6] pmon_send_pulse

Upstream-Status: Inappropriate [poky-stx specific]

Rebased for stx 5.0

Signed-off-by: Jackie Huang <jackie.huang@windriver.com>
---
 pmon/pmonHdlr.cpp | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

diff --git a/pmon/pmonHdlr.cpp b/pmon/pmonHdlr.cpp
index ba7f5ef..399bfc6 100644
--- a/pmon/pmonHdlr.cpp
+++ b/pmon/pmonHdlr.cpp
@@ -1923,10 +1923,7 @@ void pmon_service ( pmon_ctrl_type * ctrl_ptr )
              * we can turn this into a customer alarm/log.
              * Degrade is acheived by not sending the pulses to the watcher.
              */
-            if ( ctrl_ptr->event_mode == true )
-            {
-                pmon_send_pulse ( );
-            }
+            pmon_send_pulse ( );
         }
 
         if ( inotify_fault == false )
@@ -1961,11 +1958,9 @@ void pmon_service ( pmon_ctrl_type * ctrl_ptr )
             {
                 hostwd_port_init();
             }
-            if ( ctrl_ptr->event_mode == true )
-            {
-                pmon_send_hostwd ( );
-                pmonTimer_hostwd.ring = false;
-            }
+
+	    pmon_send_hostwd ( );
+	    pmonTimer_hostwd.ring = false;
         }
 
         /* Run Get Events by audit timer */
-- 
2.7.4

