From 81995b6589367213dfab8df73c3b3230051010e5 Mon Sep 17 00:00:00 2001
From: Jackie Huang <jackie.huang@windriver.com>
Date: Thu, 20 May 2021 11:57:59 +0800
Subject: [PATCH] kickstarts: add setting for debain style networking

Upstream-Status: Inappropriate [OE specific]

Rebased for stx 5.0

Signed-off-by: Jackie Huang <jackie.huang@windriver.com>
---
 bsp-files/kickstarts/post_net_common.cfg         | 6 ++++++
 bsp-files/kickstarts/post_pxeboot_controller.cfg | 6 ++++++
 2 files changed, 12 insertions(+)

diff --git a/bsp-files/kickstarts/post_net_common.cfg b/bsp-files/kickstarts/post_net_common.cfg
index 3ca9f7d..57c78b4 100755
--- a/bsp-files/kickstarts/post_net_common.cfg
+++ b/bsp-files/kickstarts/post_net_common.cfg
@@ -71,6 +71,12 @@ IPV6_AUTOCONF=no
 LINKDELAY=20
 EOF
 
+    # For Debian style networking settings
+    cat << EOF >> /etc/network/interfaces
+auto $mgmt_dev
+iface $mgmt_dev inet dhcp
+EOF
+
 else
 
     # Check whether to use inet or inet6
diff --git a/bsp-files/kickstarts/post_pxeboot_controller.cfg b/bsp-files/kickstarts/post_pxeboot_controller.cfg
index 6a3f3a4..8bd0976 100644
--- a/bsp-files/kickstarts/post_pxeboot_controller.cfg
+++ b/bsp-files/kickstarts/post_pxeboot_controller.cfg
@@ -65,6 +65,12 @@ IPV6_AUTOCONF=no
 NAME=loopback
 EOF
 
+# For Debian style networking settings
+cat << EOF >> /etc/network/interfaces
+auto $mgmt_dev
+iface $mgmt_dev inet dhcp
+EOF
+
 %end
 
 %post --erroronfail
-- 
2.7.4

