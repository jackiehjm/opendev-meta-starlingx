From 6abfdb9bcac3772142efcc7ee399d1224b031622 Mon Sep 17 00:00:00 2001
From: Jackie Huang <jackie.huang@windriver.com>
Date: Thu, 27 May 2021 15:14:55 +0800
Subject: [PATCH 03/12] puppet-dcmanager-updates-for-poky-stx

Upstream-Status: Inappropriate [poky-stx specific]

Rebased for stx 5.0

Signed-off-by: Jackie Huang <jackie.huang@windriver.com>
---
 .../src/dcmanager/manifests/params.pp              | 29 ++++++++++++++++------
 1 file changed, 22 insertions(+), 7 deletions(-)

diff --git a/modules/puppet-dcmanager/src/dcmanager/manifests/params.pp b/modules/puppet-dcmanager/src/dcmanager/manifests/params.pp
index 5cbfb50..b932048 100644
--- a/modules/puppet-dcmanager/src/dcmanager/manifests/params.pp
+++ b/modules/puppet-dcmanager/src/dcmanager/manifests/params.pp
@@ -13,13 +13,28 @@ class dcmanager::params {
   $dcmanager_conf = '/etc/dcmanager/dcmanager.conf'
 
   if $::osfamily == 'Debian' {
-    $package_name       = 'distributedcloud-dcmanager'
-    $client_package     = 'distributedcloud-client-dcmanagerclient'
-    $api_package        = 'distributedcloud-dcmanager'
-    $api_service        = 'dcmanager-api'
-    $manager_package     = 'distributedcloud-dcmanager'
-    $manager_service     = 'dcmanager-manager'
-    $db_sync_command    = 'dcmanager-manage db_sync'
+
+    if $::operatingsystem == 'poky-stx' {
+
+      $package_name       = 'distributedcloud-dcmanager'
+      $client_package     = 'distributedcloud-client-dcmanager'
+      $api_package        = false
+      $api_service        = 'dcmanager-api'
+      $manager_package     = false
+      $manager_service     = 'dcmanager-manager'
+      $db_sync_command    = 'dcmanager-manage db_sync'
+
+    } else {
+
+      $package_name       = 'distributedcloud-dcmanager'
+      $client_package     = 'distributedcloud-client-dcmanagerclient'
+      $api_package        = 'distributedcloud-dcmanager'
+      $api_service        = 'dcmanager-api'
+      $manager_package     = 'distributedcloud-dcmanager'
+      $manager_service     = 'dcmanager-manager'
+      $db_sync_command    = 'dcmanager-manage db_sync'
+
+    }
 
   } elsif($::osfamily == 'RedHat') {
 
-- 
2.7.4

